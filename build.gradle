import org.ajoberstar.grgit.*
apply plugin: 'java'

defaultTasks 'clean', 'build'

buildscript {
    repositories {
        mavenCentral()
    }
    dependencies {
        classpath 'org.ajoberstar:gradle-git:0.8.0'
        classpath fileTree(dir: '../../build/libs')
    }
}

repositories {
    mavenCentral()
}

sourceSets {
    main {
        java {
            srcDir 'src'
        }
    }
}

dependencies {
    compile 'com.googlecode.json-simple:json-simple:1.1.1'
    runtime 'com.googlecode.json-simple:json-simple:1.1.1'
}

jar {
    from {
        configurations.compile.collect {
            it.isDirectory() ? it : zipTree(it)
        }
        configurations.runtime.collect {
            it.isDirectory() ? it : zipTree(it)
        }
    }
    manifest {
        attributes 'Main-Class' : 'nl.igorski.cto.Main',
                'Built-By'   : System.getProperty( 'user.name' ),
                'Built-Date' : new Date(),
                'Built-JDK'  : System.getProperty( 'java.version' )
    }
    baseName = 'cto'
}
